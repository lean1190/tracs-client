<ion-view cache-view="false" view-title="Diagnóstico">
    <ion-content>

        <ion-tabs class="tabs-striped tabs-top patient-tabs">

            <ion-tab title="DIAGNÓSTICO" on-select="">
                <div class="diagnosis-tab">
                    <h4 ng-if="!vm.patient.latestDiagnosis">El paciente aún no tiene un diagnóstico asignado. Empieza creando uno</h4>

                    <floating-button state="'app.patientDiagnosisCreate'" text="'+'" ng-show="!vm.editOn" class="tab-fix"></floating-button>

                    <div class="display" ng-show="vm.patient.latestDiagnosis && !vm.editOn">
                        <div>Diagnosticado por {{::vm.patientDiagnosis.madeBy.name}} <span class="date" style="font-size:11px; color: light-grey">el {{::vm.patientDiagnosis.date | date:"dd/MM/yyyy"}}</span></div>
                        <h4>{{::vm.patientDiagnosis.name}}</h3>
                        <p>{{::vm.patientDiagnosis.description}}</p>
                    </div>

                    <div class="editDiagnosis" ng-show="vm.patient.latestDiagnosis && vm.editOn">
                        <label class="item item-input item-floating-label">
                            <span class="input-label">Diagnóstico</span>
                            <input type="text" ng-model="vm.patientDiagnosis.name" placeholder="Diagnóstico" required>
                        </label>

                        <label class="item item-input item-floating-label">
                            <span class="input-label">Descripción</span>
                            <textarea type="text" ng-model="vm.patientDiagnosis.description" placeholder="Descripción" required></textarea>
                        </label>
                    </div>
                </div>
            </ion-tab>

            <ion-tab title="MEDICACIÓN" on-select="">
                <div class="medication-tab">
                    <h4 ng-if="!vm.patientMedications.length">El paciente aún no tiene un diagnóstico asignado. Empieza creando uno</h4>

                    <!--<floating-button state="'app.patientDiagnosisCreate'" text="'+'" ng-show="!vm.editOn"></floating-button>-->
                    <!--<ion-item ng-repeat="medication in vm.patientMedications">
                        <h3>Nombre Medicamento: {{::medication.drug}}</h3>
                        <h3>Dosis: {{::medication.dosis}}</h3>
                        <h4>Frecuencia: {{::medication.frequence}}</h4>
                        <h4>Fecha de prescripción: {{::medication.date}}</h4>
                        </ion-item>
                    -->
                    <div class="card" ng-repeat="medication in vm.patientMedications">
                        <div class="item item-divider">
                            {{::medication.drug}}
                        </div>
                        <div class="item item-text-wrap">
                            <div>Prescripto el {{::medication.date | date:"dd/MM/yyyy"}}</div>
                            <div>{{::medication.dosis}} cada {{::medication.frequence}}</div>
                        </div>
                    </div>

                    <a ng-click="vm.medicationCreate()">Agregar Medicacion</a>
                </div>
            </ion-tab>

            <ion-tab title="HISTORIA" on-select="">
                <div class="history-tab">
                    NOTHING HERE YET
                </div>
            </ion-tab>

        </ion-tabs>

    </ion-content>
</ion-view>
